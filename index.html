<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Serie numeriche su diagramma a dispersione</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    select, input { margin: 5px; }
  </style>
</head>
<body>

<h2>Serie numeriche</h2>

<label for="serieType">Tipo di serie:</label>
<select id="serieType">
  <option value="aritmetica">Aritmetica</option>
  <option value="geometrica">Geometrica</option>
  <option value="fibonacci">Fibonacci</option>
</select>

<label for="n">Numero di elementi:</label>
<input type="number" id="n" value="10" min="1">

<button id="genera">Genera e Disegna</button>

<canvas id="scatterChart" width="600" height="400"></canvas>

<script>
  const ctx = document.getElementById('scatterChart').getContext('2d');
  let chart;

  function generaSerie(type, n) {
    let data = [];
    if(type === "aritmetica") {
      let a1 = 1, d = 2;
      for(let i=0; i<n; i++){
        data.push({x: i+1, y: a1 + i*d});
      }
    } else if(type === "geometrica") {
      let a1 = 1, r = 2;
      for(let i=0; i<n; i++){
        data.push({x: i+1, y: a1 * Math.pow(r, i)});
      }
    } else if(type === "fibonacci") {
      let a = 0, b = 1;
      for(let i=0; i<n; i++){
        data.push({x: i+1, y: a});
        let temp = a + b;
        a = b;
        b = temp;
      }
    }
    return data;
  }

  function disegnaGrafico(data) {
    if(chart) chart.destroy(); // cancella il grafico precedente
    chart = new Chart(ctx, {
      type: 'scatter',
      data: {
        datasets: [{
          label: 'Serie numerica',
          data: data,
          backgroundColor: 'rgba(75, 192, 192, 0.7)'
        }]
      },
      options: {
        scales: {
          x: { title: { display: true, text: 'Indice' } },
          y: { title: { display: true, text: 'Valore' } }
        }
      }
    });
  }

  document.getElementById('genera').addEventListener('click', () => {
    const type = document.getElementById('serieType').value;
    const n = parseInt(document.getElementById('n').value);
    const data = generaSerie(type, n);
    disegnaGrafico(data);
  });

  // Genera grafico iniziale
  document.getElementById('genera').click();
</script>

</body>
</html>
